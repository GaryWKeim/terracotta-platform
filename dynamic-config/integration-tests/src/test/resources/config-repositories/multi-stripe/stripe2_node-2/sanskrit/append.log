2019-07-27T20:38:30.316Z
{
  "mutativeMessageCount" : 1,
  "mode" : "ACCEPTING",
  "currentVersion" : 0,
  "highestVersion" : 0
}
8d3530d790dedf8e4dd7fcf4729d347f6905a114

2019-07-27T20:38:30.321Z
{
  "mutativeMessageCount" : 2,
  "mode" : "PREPARED",
  "latestChangeUuid" : "e0c24f35-cc1a-4a3d-9dc3-feb2e8e6bd36",
  "highestVersion" : 1,
  "lastMutationHost" : "MCMATC01",
  "lastMutationUser" : "mathieu",
  "e0c24f35-cc1a-4a3d-9dc3-feb2e8e6bd36" : {
    "state" : "PREPARED",
    "version" : 1,
    "operation" : {
      "type" : "ConfigMigrationNomadChange",
      "configuration" : "<tc-config xmlns=\"http://www.terracotta.org/config\" xmlns:ohr=\"http://www.terracottatech.com/config/data-roots\" xmlns:ohr1=\"http://www.terracotta.org/config/offheap-resource\" xmlns:persistence=\"http://www.terracottatech.com/config/platform-persistence\">\n  <plugins>\n    <config>\n      <ohr:data-directories>\n        <ohr:directory name=\"root1\" use-for-platform=\"false\">%(user.dir)/metadata/stripe2</ohr:directory>\n      </ohr:data-directories>\n    </config>\n    <service>\n      <backup-restore xmlns=\"http://www.terracottatech.com/config/backup-restore\">\n        <backup-location path=\"%(user.dir)/backup/stripe2\"/>\n      </backup-restore>\n    </service>\n    <service>\n      <persistence:platform-persistence data-directory-id=\"root1\"/>\n    </service>\n    <config>\n      <ohr1:offheap-resources>\n        <ohr1:resource name=\"primary-server-resource\" unit=\"MB\">64</ohr1:resource>\n      </ohr1:offheap-resources>\n    </config>\n    <config>\n      <cl:cluster xmlns:cl=\"http://www.terracotta.org/config/cluster\">\n        <cl:name>testCluster</cl:name>\n        <cl:stripe>\n          <cl:node>\n            <cl:name>node-1</cl:name>\n            <cl:server-config>\n              <tc-config xmlns:data=\"http://www.terracottatech.com/config/data-roots\" xmlns:ohr=\"http://www.terracotta.org/config/offheap-resource\">\n                <plugins>\n                  <config>\n                    <data:data-directories>\n                      <data:directory name=\"root1\" use-for-platform=\"false\">%(user.dir)/metadata/stripe1</data:directory>\n                    </data:data-directories>\n                  </config>\n                  <service>\n                    <backup-restore xmlns=\"http://www.terracottatech.com/config/backup-restore\">\n                      <backup-location path=\"%(user.dir)/backup/stripe1\"/>\n                    </backup-restore>\n                  </service>\n                  <service>\n                    <persistence:platform-persistence data-directory-id=\"root1\"/>\n                  </service>\n                  <config>\n                    <ohr:offheap-resources>\n                      <ohr:resource name=\"primary-server-resource\" unit=\"MB\">64</ohr:resource>\n                    </ohr:offheap-resources>\n                  </config>\n                </plugins>\n                <tc-properties/>\n                <servers>\n                  <server bind=\"0.0.0.0\" host=\"localhost\" name=\"node-1\">\n                    <logs>%(user.dir)/logs/stripe1/node-1</logs>\n                    <tsa-port>9410</tsa-port>\n                    <tsa-group-port>9430</tsa-group-port>\n                  </server>\n                  <server bind=\"0.0.0.0\" host=\"localhost\" name=\"node-2\">\n                    <logs>%(user.dir)/logs/stripe1/node-2</logs>\n                    <tsa-port>9510</tsa-port>\n                    <tsa-group-port>9530</tsa-group-port>\n                  </server>\n                  <client-reconnect-window>120</client-reconnect-window>\n                </servers>\n                <failover-priority>\n                  <availability/>\n                </failover-priority>\n              </tc-config>\n            </cl:server-config>\n          </cl:node>\n          <cl:node>\n            <cl:name>node-2</cl:name>\n            <cl:server-config>\n              <tc-config xmlns:data=\"http://www.terracottatech.com/config/data-roots\" xmlns:ohr=\"http://www.terracotta.org/config/offheap-resource\">\n                <plugins>\n                  <config>\n                    <data:data-directories>\n                      <data:directory name=\"root1\" use-for-platform=\"false\">%(user.dir)/metadata/stripe1</data:directory>\n                    </data:data-directories>\n                  </config>\n                  <service>\n                    <backup-restore xmlns=\"http://www.terracottatech.com/config/backup-restore\">\n                      <backup-location path=\"%(user.dir)/backup/stripe1\"/>\n                    </backup-restore>\n                  </service>\n                  <service>\n                    <persistence:platform-persistence data-directory-id=\"root1\"/>\n                  </service>\n                  <config>\n                    <ohr:offheap-resources>\n                      <ohr:resource name=\"primary-server-resource\" unit=\"MB\">64</ohr:resource>\n                    </ohr:offheap-resources>\n                  </config>\n                </plugins>\n                <tc-properties/>\n                <servers>\n                  <server bind=\"0.0.0.0\" host=\"localhost\" name=\"node-1\">\n                    <logs>%(user.dir)/logs/stripe1/node-1</logs>\n                    <tsa-port>9410</tsa-port>\n                    <tsa-group-port>9430</tsa-group-port>\n                  </server>\n                  <server bind=\"0.0.0.0\" host=\"localhost\" name=\"node-2\">\n                    <logs>%(user.dir)/logs/stripe1/node-2</logs>\n                    <tsa-port>9510</tsa-port>\n                    <tsa-group-port>9530</tsa-group-port>\n                  </server>\n                  <client-reconnect-window>120</client-reconnect-window>\n                </servers>\n                <failover-priority>\n                  <availability/>\n                </failover-priority>\n              </tc-config>\n            </cl:server-config>\n          </cl:node>\n        </cl:stripe>\n        <cl:stripe>\n          <cl:node>\n            <cl:name>node-1</cl:name>\n            <cl:server-config>\n              <tc-config>\n                <plugins>\n                  <config>\n                    <ohr:data-directories>\n                      <ohr:directory name=\"root1\" use-for-platform=\"false\">%(user.dir)/metadata/stripe2</ohr:directory>\n                    </ohr:data-directories>\n                  </config>\n                  <service>\n                    <backup-restore xmlns=\"http://www.terracottatech.com/config/backup-restore\">\n                      <backup-location path=\"%(user.dir)/backup/stripe2\"/>\n                    </backup-restore>\n                  </service>\n                  <service>\n                    <persistence:platform-persistence data-directory-id=\"root1\"/>\n                  </service>\n                  <config>\n                    <ohr1:offheap-resources>\n                      <ohr1:resource name=\"primary-server-resource\" unit=\"MB\">64</ohr1:resource>\n                    </ohr1:offheap-resources>\n                  </config>\n                </plugins>\n                <tc-properties/>\n                <servers>\n                  <server bind=\"0.0.0.0\" host=\"localhost\" name=\"node-1\">\n                    <logs>%(user.dir)/logs/stripe2/node-1</logs>\n                    <tsa-port>9610</tsa-port>\n                    <tsa-group-port>9630</tsa-group-port>\n                  </server>\n                  <server bind=\"0.0.0.0\" host=\"localhost\" name=\"node-2\">\n                    <logs>%(user.dir)/logs/stripe2/node-2</logs>\n                    <tsa-port>9710</tsa-port>\n                    <tsa-group-port>9730</tsa-group-port>\n                  </server>\n                  <client-reconnect-window>120</client-reconnect-window>\n                </servers>\n                <failover-priority>\n                  <availability/>\n                </failover-priority>\n              </tc-config>\n            </cl:server-config>\n          </cl:node>\n          <cl:node>\n            <cl:name>node-2</cl:name>\n            <cl:server-config>\n              <tc-config>\n                <plugins>\n                  <config>\n                    <ohr:data-directories>\n                      <ohr:directory name=\"root1\" use-for-platform=\"false\">%(user.dir)/metadata/stripe2</ohr:directory>\n                    </ohr:data-directories>\n                  </config>\n                  <service>\n                    <backup-restore xmlns=\"http://www.terracottatech.com/config/backup-restore\">\n                      <backup-location path=\"%(user.dir)/backup/stripe2\"/>\n                    </backup-restore>\n                  </service>\n                  <service>\n                    <persistence:platform-persistence data-directory-id=\"root1\"/>\n                  </service>\n                  <config>\n                    <ohr1:offheap-resources>\n                      <ohr1:resource name=\"primary-server-resource\" unit=\"MB\">64</ohr1:resource>\n                    </ohr1:offheap-resources>\n                  </config>\n                </plugins>\n                <tc-properties/>\n                <servers>\n                  <server bind=\"0.0.0.0\" host=\"localhost\" name=\"node-1\">\n                    <logs>%(user.dir)/logs/stripe2/node-1</logs>\n                    <tsa-port>9610</tsa-port>\n                    <tsa-group-port>9630</tsa-group-port>\n                  </server>\n                  <server bind=\"0.0.0.0\" host=\"localhost\" name=\"node-2\">\n                    <logs>%(user.dir)/logs/stripe2/node-2</logs>\n                    <tsa-port>9710</tsa-port>\n                    <tsa-group-port>9730</tsa-group-port>\n                  </server>\n                  <client-reconnect-window>120</client-reconnect-window>\n                </servers>\n                <failover-priority>\n                  <availability/>\n                </failover-priority>\n              </tc-config>\n            </cl:server-config>\n          </cl:node>\n        </cl:stripe>\n      </cl:cluster>\n    </config>\n  </plugins>\n  <tc-properties/>\n  <servers>\n    <server bind=\"0.0.0.0\" host=\"localhost\" name=\"node-1\">\n      <logs>%(user.dir)/logs/stripe2/node-1</logs>\n      <tsa-port>9610</tsa-port>\n      <tsa-group-port>9630</tsa-group-port>\n    </server>\n    <server bind=\"0.0.0.0\" host=\"localhost\" name=\"node-2\">\n      <logs>%(user.dir)/logs/stripe2/node-2</logs>\n      <tsa-port>9710</tsa-port>\n      <tsa-group-port>9730</tsa-group-port>\n    </server>\n    <client-reconnect-window>120</client-reconnect-window>\n  </servers>\n  <failover-priority>\n    <availability/>\n  </failover-priority>\n</tc-config>\n",
      "summary" : "Migrating configuration"
    },
    "changeResultHash" : "ba782b2bdb86b4c1c3b6acafbc4135c068d78f43",
    "creationHost" : "MCMATC01",
    "creationUser" : "mathieu"
  }
}
92796a53e7e3fa5d9ff52b8b984e06ab0bbd9cdb

2019-07-27T20:38:30.330Z
{
  "mutativeMessageCount" : 3,
  "mode" : "ACCEPTING",
  "currentVersion" : 1,
  "lastMutationHost" : "MCMATC01",
  "lastMutationUser" : "mathieu",
  "e0c24f35-cc1a-4a3d-9dc3-feb2e8e6bd36" : {
    "state" : "COMMITTED",
    "version" : 1,
    "operation" : {
      "type" : "ConfigMigrationNomadChange",
      "configuration" : "<tc-config xmlns=\"http://www.terracotta.org/config\" xmlns:ohr=\"http://www.terracottatech.com/config/data-roots\" xmlns:ohr1=\"http://www.terracotta.org/config/offheap-resource\" xmlns:persistence=\"http://www.terracottatech.com/config/platform-persistence\">\n  <plugins>\n    <config>\n      <ohr:data-directories>\n        <ohr:directory name=\"root1\" use-for-platform=\"false\">%(user.dir)/metadata/stripe2</ohr:directory>\n      </ohr:data-directories>\n    </config>\n    <service>\n      <backup-restore xmlns=\"http://www.terracottatech.com/config/backup-restore\">\n        <backup-location path=\"%(user.dir)/backup/stripe2\"/>\n      </backup-restore>\n    </service>\n    <service>\n      <persistence:platform-persistence data-directory-id=\"root1\"/>\n    </service>\n    <config>\n      <ohr1:offheap-resources>\n        <ohr1:resource name=\"primary-server-resource\" unit=\"MB\">64</ohr1:resource>\n      </ohr1:offheap-resources>\n    </config>\n    <config>\n      <cl:cluster xmlns:cl=\"http://www.terracotta.org/config/cluster\">\n        <cl:name>testCluster</cl:name>\n        <cl:stripe>\n          <cl:node>\n            <cl:name>node-1</cl:name>\n            <cl:server-config>\n              <tc-config xmlns:data=\"http://www.terracottatech.com/config/data-roots\" xmlns:ohr=\"http://www.terracotta.org/config/offheap-resource\">\n                <plugins>\n                  <config>\n                    <data:data-directories>\n                      <data:directory name=\"root1\" use-for-platform=\"false\">%(user.dir)/metadata/stripe1</data:directory>\n                    </data:data-directories>\n                  </config>\n                  <service>\n                    <backup-restore xmlns=\"http://www.terracottatech.com/config/backup-restore\">\n                      <backup-location path=\"%(user.dir)/backup/stripe1\"/>\n                    </backup-restore>\n                  </service>\n                  <service>\n                    <persistence:platform-persistence data-directory-id=\"root1\"/>\n                  </service>\n                  <config>\n                    <ohr:offheap-resources>\n                      <ohr:resource name=\"primary-server-resource\" unit=\"MB\">64</ohr:resource>\n                    </ohr:offheap-resources>\n                  </config>\n                </plugins>\n                <tc-properties/>\n                <servers>\n                  <server bind=\"0.0.0.0\" host=\"localhost\" name=\"node-1\">\n                    <logs>%(user.dir)/logs/stripe1/node-1</logs>\n                    <tsa-port>9410</tsa-port>\n                    <tsa-group-port>9430</tsa-group-port>\n                  </server>\n                  <server bind=\"0.0.0.0\" host=\"localhost\" name=\"node-2\">\n                    <logs>%(user.dir)/logs/stripe1/node-2</logs>\n                    <tsa-port>9510</tsa-port>\n                    <tsa-group-port>9530</tsa-group-port>\n                  </server>\n                  <client-reconnect-window>120</client-reconnect-window>\n                </servers>\n                <failover-priority>\n                  <availability/>\n                </failover-priority>\n              </tc-config>\n            </cl:server-config>\n          </cl:node>\n          <cl:node>\n            <cl:name>node-2</cl:name>\n            <cl:server-config>\n              <tc-config xmlns:data=\"http://www.terracottatech.com/config/data-roots\" xmlns:ohr=\"http://www.terracotta.org/config/offheap-resource\">\n                <plugins>\n                  <config>\n                    <data:data-directories>\n                      <data:directory name=\"root1\" use-for-platform=\"false\">%(user.dir)/metadata/stripe1</data:directory>\n                    </data:data-directories>\n                  </config>\n                  <service>\n                    <backup-restore xmlns=\"http://www.terracottatech.com/config/backup-restore\">\n                      <backup-location path=\"%(user.dir)/backup/stripe1\"/>\n                    </backup-restore>\n                  </service>\n                  <service>\n                    <persistence:platform-persistence data-directory-id=\"root1\"/>\n                  </service>\n                  <config>\n                    <ohr:offheap-resources>\n                      <ohr:resource name=\"primary-server-resource\" unit=\"MB\">64</ohr:resource>\n                    </ohr:offheap-resources>\n                  </config>\n                </plugins>\n                <tc-properties/>\n                <servers>\n                  <server bind=\"0.0.0.0\" host=\"localhost\" name=\"node-1\">\n                    <logs>%(user.dir)/logs/stripe1/node-1</logs>\n                    <tsa-port>9410</tsa-port>\n                    <tsa-group-port>9430</tsa-group-port>\n                  </server>\n                  <server bind=\"0.0.0.0\" host=\"localhost\" name=\"node-2\">\n                    <logs>%(user.dir)/logs/stripe1/node-2</logs>\n                    <tsa-port>9510</tsa-port>\n                    <tsa-group-port>9530</tsa-group-port>\n                  </server>\n                  <client-reconnect-window>120</client-reconnect-window>\n                </servers>\n                <failover-priority>\n                  <availability/>\n                </failover-priority>\n              </tc-config>\n            </cl:server-config>\n          </cl:node>\n        </cl:stripe>\n        <cl:stripe>\n          <cl:node>\n            <cl:name>node-1</cl:name>\n            <cl:server-config>\n              <tc-config>\n                <plugins>\n                  <config>\n                    <ohr:data-directories>\n                      <ohr:directory name=\"root1\" use-for-platform=\"false\">%(user.dir)/metadata/stripe2</ohr:directory>\n                    </ohr:data-directories>\n                  </config>\n                  <service>\n                    <backup-restore xmlns=\"http://www.terracottatech.com/config/backup-restore\">\n                      <backup-location path=\"%(user.dir)/backup/stripe2\"/>\n                    </backup-restore>\n                  </service>\n                  <service>\n                    <persistence:platform-persistence data-directory-id=\"root1\"/>\n                  </service>\n                  <config>\n                    <ohr1:offheap-resources>\n                      <ohr1:resource name=\"primary-server-resource\" unit=\"MB\">64</ohr1:resource>\n                    </ohr1:offheap-resources>\n                  </config>\n                </plugins>\n                <tc-properties/>\n                <servers>\n                  <server bind=\"0.0.0.0\" host=\"localhost\" name=\"node-1\">\n                    <logs>%(user.dir)/logs/stripe2/node-1</logs>\n                    <tsa-port>9610</tsa-port>\n                    <tsa-group-port>9630</tsa-group-port>\n                  </server>\n                  <server bind=\"0.0.0.0\" host=\"localhost\" name=\"node-2\">\n                    <logs>%(user.dir)/logs/stripe2/node-2</logs>\n                    <tsa-port>9710</tsa-port>\n                    <tsa-group-port>9730</tsa-group-port>\n                  </server>\n                  <client-reconnect-window>120</client-reconnect-window>\n                </servers>\n                <failover-priority>\n                  <availability/>\n                </failover-priority>\n              </tc-config>\n            </cl:server-config>\n          </cl:node>\n          <cl:node>\n            <cl:name>node-2</cl:name>\n            <cl:server-config>\n              <tc-config>\n                <plugins>\n                  <config>\n                    <ohr:data-directories>\n                      <ohr:directory name=\"root1\" use-for-platform=\"false\">%(user.dir)/metadata/stripe2</ohr:directory>\n                    </ohr:data-directories>\n                  </config>\n                  <service>\n                    <backup-restore xmlns=\"http://www.terracottatech.com/config/backup-restore\">\n                      <backup-location path=\"%(user.dir)/backup/stripe2\"/>\n                    </backup-restore>\n                  </service>\n                  <service>\n                    <persistence:platform-persistence data-directory-id=\"root1\"/>\n                  </service>\n                  <config>\n                    <ohr1:offheap-resources>\n                      <ohr1:resource name=\"primary-server-resource\" unit=\"MB\">64</ohr1:resource>\n                    </ohr1:offheap-resources>\n                  </config>\n                </plugins>\n                <tc-properties/>\n                <servers>\n                  <server bind=\"0.0.0.0\" host=\"localhost\" name=\"node-1\">\n                    <logs>%(user.dir)/logs/stripe2/node-1</logs>\n                    <tsa-port>9610</tsa-port>\n                    <tsa-group-port>9630</tsa-group-port>\n                  </server>\n                  <server bind=\"0.0.0.0\" host=\"localhost\" name=\"node-2\">\n                    <logs>%(user.dir)/logs/stripe2/node-2</logs>\n                    <tsa-port>9710</tsa-port>\n                    <tsa-group-port>9730</tsa-group-port>\n                  </server>\n                  <client-reconnect-window>120</client-reconnect-window>\n                </servers>\n                <failover-priority>\n                  <availability/>\n                </failover-priority>\n              </tc-config>\n            </cl:server-config>\n          </cl:node>\n        </cl:stripe>\n      </cl:cluster>\n    </config>\n  </plugins>\n  <tc-properties/>\n  <servers>\n    <server bind=\"0.0.0.0\" host=\"localhost\" name=\"node-1\">\n      <logs>%(user.dir)/logs/stripe2/node-1</logs>\n      <tsa-port>9610</tsa-port>\n      <tsa-group-port>9630</tsa-group-port>\n    </server>\n    <server bind=\"0.0.0.0\" host=\"localhost\" name=\"node-2\">\n      <logs>%(user.dir)/logs/stripe2/node-2</logs>\n      <tsa-port>9710</tsa-port>\n      <tsa-group-port>9730</tsa-group-port>\n    </server>\n    <client-reconnect-window>120</client-reconnect-window>\n  </servers>\n  <failover-priority>\n    <availability/>\n  </failover-priority>\n</tc-config>\n",
      "summary" : "Migrating configuration"
    },
    "changeResultHash" : "ba782b2bdb86b4c1c3b6acafbc4135c068d78f43",
    "creationHost" : "MCMATC01",
    "creationUser" : "mathieu"
  }
}
0d7faf53ea1e168a5f50704064d9bf89efb26986

